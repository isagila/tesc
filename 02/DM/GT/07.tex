\question{Теорема Холла.}

\begin{theorem}\label{Hall}
  Теорема Холла.
  
  Пусть дан двудольный граф \(G = \Triple{X, Y, E}\). В нем существует
  \(X\)-совершенное паросочетание тогда и только тогда, когда

  \begin{align*}
    \forall S \subseteq X \colon \abs{N(S)} \ge \abs{S}
  \end{align*}
\end{theorem}

\input{figures/GT/07/hall.tex}

\begin{proof}
  \(\implies\) Если в графе существует \(X\)-совершенное паросочетание, то для
  любого \(x \in X\) существует уникальный сосед в \(Y\), значит количество
  соседей у любого \(S \subseteq X\) будет как минимум \(\abs{x}\).

  \(\impliedby\) Индукция по \(\abs{X}\).

  \textbf{База}: \(\abs{X} = 1\). Очевидно, что \(X\)-совершенное паросочетание
  существует тогда и только тогда, когда у единственной вершине в \(X\) будет
  как минимум один сосед из \(Y\).

  \textbf{Переход}: пусть теорема верна при \(\abs{X} < n\). Рассмотрим граф,
  удовлетворяющий условиям теоремы, в котором \(\abs{X} = n\). Возможны два
  случая:

  \begin{enumerate}
    \item \(\forall S \subseteq X \colon \abs{N(S)} > \abs{S}\)

    Выберем произвольный \(x \in S\) и поставим ему в пару любого из его
    соседей. Обозначим этого соседа \(y\), а оставшиеся в \(S\) вершины \(S'\).

    Т.к. до выбора соседа для \(x\) выполнялось неравенство
    \(\abs{N(S')} > \abs{S'}\), то после выбора соседа выполняется неравенство
    \(\abs{N(S')} \ge \abs{S'}\), т.к. количество свободных соседей \(S'\) могло
    уменьшиться не более чем на один (оно уменьшилось на один в случае, если
    \(y \in N(S')\)).

    Пары для оставшихся вершин мы можем найти по предположению индукции.

    \item \(\exists S \subseteq X \colon \abs{N(S)} = \abs{S}\)
    
    Каждому \(x \in S\) по предположению индукции поставим в пару одного из его
    соседей. Рассмотрим оставшиеся вершины \(S' = X \setminus S\). Покажем, что
    для них тоже можно найти пару.

    Пусть найдется такое \(P \subseteq S'\), что \(\abs{N(P)} < \abs{P}\). Тогда
    рассмотрим множество \(S \cup P\). Т.к. \(\abs{N(S)} = \abs{S}\) и
    \(\abs{N(P)} < \abs{P}\), то \(\abs{N(S \cup P)} < \abs{S \cup P}\). Это
    противоречит условию теоремы, значит
    \(\forall P \subseteq S' \colon \abs{N(P)} \ge \abs{P}\), поэтому по
    предположению индукции мы можем найти пары для всех \(x \in S'\).
  \end{enumerate}
\end{proof}
